{"version":3,"file":"js/406.8eacf406.js","mappings":"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","sources":["webpack://vue3-ts-xiangmu/./node_modules/lodash-es/throttle.js","webpack://vue3-ts-xiangmu/../../../packages/components/image-viewer/src/image-viewer.ts","webpack://vue3-ts-xiangmu/../../../packages/utils/browser.ts","webpack://vue3-ts-xiangmu/../../../packages/components/image-viewer/src/image-viewer.vue","webpack://vue3-ts-xiangmu/../../../packages/components/image-viewer/index.ts","webpack://vue3-ts-xiangmu/../../../packages/components/image/src/image.ts","webpack://vue3-ts-xiangmu/../../../packages/utils/dom/position.ts","webpack://vue3-ts-xiangmu/../../../packages/components/image/src/image.vue","webpack://vue3-ts-xiangmu/../../../packages/components/image/index.ts","webpack://vue3-ts-xiangmu/./src/views/main/product/goods/goods.vue?9f4a","webpack://vue3-ts-xiangmu/./src/views/main/product/goods/config/content.config.ts","webpack://vue3-ts-xiangmu/./src/views/main/product/goods/goods.vue","webpack://vue3-ts-xiangmu/./src/views/main/product/goods/goods.vue?7121"],"sourcesContent":["import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import { buildProps, definePropType, mutable } from '@element-plus/utils'\nimport type { Component, ExtractPropTypes } from 'vue'\n\nexport type ImageViewerAction =\n  | 'zoomIn'\n  | 'zoomOut'\n  | 'clockwise'\n  | 'anticlockwise'\n\nexport const imageViewerProps = buildProps({\n  urlList: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  zIndex: {\n    type: Number,\n  },\n  initialIndex: {\n    type: Number,\n    default: 0,\n  },\n  infinite: {\n    type: Boolean,\n    default: true,\n  },\n  hideOnClickModal: {\n    type: Boolean,\n    default: false,\n  },\n  teleported: {\n    type: Boolean,\n    default: false,\n  },\n  closeOnPressEscape: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type ImageViewerProps = ExtractPropTypes<typeof imageViewerProps>\n\nexport const imageViewerEmits = {\n  close: () => true,\n  switch: (index: number) => typeof index === 'number',\n}\nexport type ImageViewerEmits = typeof imageViewerEmits\n\nexport interface ImageViewerMode {\n  name: string\n  icon: Component\n}\n","import { isClient } from '@vueuse/core'\n\nexport const isFirefox = (): boolean =>\n  isClient && /firefox/i.test(window.navigator.userAgent)\n","<template>\n  <teleport to=\"body\" :disabled=\"!teleported\">\n    <transition name=\"viewer-fade\" appear>\n      <div\n        ref=\"wrapper\"\n        :tabindex=\"-1\"\n        :class=\"ns.e('wrapper')\"\n        :style=\"{ zIndex: computedZIndex }\"\n      >\n        <div :class=\"ns.e('mask')\" @click.self=\"hideOnClickModal && hide()\" />\n\n        <!-- CLOSE -->\n        <span :class=\"[ns.e('btn'), ns.e('close')]\" @click=\"hide\">\n          <el-icon><Close /></el-icon>\n        </span>\n\n        <!-- ARROW -->\n        <template v-if=\"!isSingle\">\n          <span\n            :class=\"[\n              ns.e('btn'),\n              ns.e('prev'),\n              ns.is('disabled', !infinite && isFirst),\n            ]\"\n            @click=\"prev\"\n          >\n            <el-icon><ArrowLeft /></el-icon>\n          </span>\n          <span\n            :class=\"[\n              ns.e('btn'),\n              ns.e('next'),\n              ns.is('disabled', !infinite && isLast),\n            ]\"\n            @click=\"next\"\n          >\n            <el-icon><ArrowRight /></el-icon>\n          </span>\n        </template>\n        <!-- ACTIONS -->\n        <div :class=\"[ns.e('btn'), ns.e('actions')]\">\n          <div :class=\"ns.e('actions__inner')\">\n            <el-icon @click=\"handleActions('zoomOut')\">\n              <ZoomOut />\n            </el-icon>\n            <el-icon @click=\"handleActions('zoomIn')\">\n              <ZoomIn />\n            </el-icon>\n            <i :class=\"ns.e('actions__divider')\" />\n            <el-icon @click=\"toggleMode\">\n              <component :is=\"mode.icon\" />\n            </el-icon>\n            <i :class=\"ns.e('actions__divider')\" />\n            <el-icon @click=\"handleActions('anticlockwise')\">\n              <RefreshLeft />\n            </el-icon>\n            <el-icon @click=\"handleActions('clockwise')\">\n              <RefreshRight />\n            </el-icon>\n          </div>\n        </div>\n        <!-- CANVAS -->\n        <div :class=\"ns.e('canvas')\">\n          <img\n            v-for=\"(url, i) in urlList\"\n            v-show=\"i === index\"\n            :ref=\"(el) => (imgRefs[i] = el as HTMLImageElement)\"\n            :key=\"url\"\n            :src=\"url\"\n            :style=\"imgStyle\"\n            :class=\"ns.e('img')\"\n            @load=\"handleImgLoad\"\n            @error=\"handleImgError\"\n            @mousedown=\"handleMouseDown\"\n          />\n        </div>\n        <slot />\n      </div>\n    </transition>\n  </teleport>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  effectScope,\n  markRaw,\n  nextTick,\n  onMounted,\n  ref,\n  shallowRef,\n  watch,\n} from 'vue'\nimport { isNumber, useEventListener } from '@vueuse/core'\nimport { throttle } from 'lodash-unified'\nimport { useLocale, useNamespace, useZIndex } from '@element-plus/hooks'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { isFirefox, keysOf } from '@element-plus/utils'\nimport ElIcon from '@element-plus/components/icon'\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Close,\n  FullScreen,\n  RefreshLeft,\n  RefreshRight,\n  ScaleToOriginal,\n  ZoomIn,\n  ZoomOut,\n} from '@element-plus/icons-vue'\nimport { imageViewerEmits, imageViewerProps } from './image-viewer'\n\nimport type { CSSProperties } from 'vue'\nimport type { ImageViewerAction, ImageViewerMode } from './image-viewer'\n\nconst modes: Record<'CONTAIN' | 'ORIGINAL', ImageViewerMode> = {\n  CONTAIN: {\n    name: 'contain',\n    icon: markRaw(FullScreen),\n  },\n  ORIGINAL: {\n    name: 'original',\n    icon: markRaw(ScaleToOriginal),\n  },\n}\n\nconst mousewheelEventName = isFirefox() ? 'DOMMouseScroll' : 'mousewheel'\n\ndefineOptions({\n  name: 'ElImageViewer',\n})\n\nconst props = defineProps(imageViewerProps)\nconst emit = defineEmits(imageViewerEmits)\n\nconst { t } = useLocale()\nconst ns = useNamespace('image-viewer')\nconst { nextZIndex } = useZIndex()\nconst wrapper = ref<HTMLDivElement>()\nconst imgRefs = ref<HTMLImageElement[]>([])\n\nconst scopeEventListener = effectScope()\n\nconst loading = ref(true)\nconst index = ref(props.initialIndex)\nconst mode = shallowRef<ImageViewerMode>(modes.CONTAIN)\nconst transform = ref({\n  scale: 1,\n  deg: 0,\n  offsetX: 0,\n  offsetY: 0,\n  enableTransition: false,\n})\n\nconst isSingle = computed(() => {\n  const { urlList } = props\n  return urlList.length <= 1\n})\n\nconst isFirst = computed(() => {\n  return index.value === 0\n})\n\nconst isLast = computed(() => {\n  return index.value === props.urlList.length - 1\n})\n\nconst currentImg = computed(() => {\n  return props.urlList[index.value]\n})\n\nconst imgStyle = computed(() => {\n  const { scale, deg, offsetX, offsetY, enableTransition } = transform.value\n  let translateX = offsetX / scale\n  let translateY = offsetY / scale\n\n  switch (deg % 360) {\n    case 90:\n    case -270:\n      ;[translateX, translateY] = [translateY, -translateX]\n      break\n    case 180:\n    case -180:\n      ;[translateX, translateY] = [-translateX, -translateY]\n      break\n    case 270:\n    case -90:\n      ;[translateX, translateY] = [-translateY, translateX]\n      break\n  }\n\n  const style: CSSProperties = {\n    transform: `scale(${scale}) rotate(${deg}deg) translate(${translateX}px, ${translateY}px)`,\n    transition: enableTransition ? 'transform .3s' : '',\n  }\n  if (mode.value.name === modes.CONTAIN.name) {\n    style.maxWidth = style.maxHeight = '100%'\n  }\n  return style\n})\n\nconst computedZIndex = computed(() => {\n  return isNumber(props.zIndex) ? props.zIndex : nextZIndex()\n})\n\nfunction hide() {\n  unregisterEventListener()\n  emit('close')\n}\n\nfunction registerEventListener() {\n  const keydownHandler = throttle((e: KeyboardEvent) => {\n    switch (e.code) {\n      // ESC\n      case EVENT_CODE.esc:\n        props.closeOnPressEscape && hide()\n        break\n      // SPACE\n      case EVENT_CODE.space:\n        toggleMode()\n        break\n      // LEFT_ARROW\n      case EVENT_CODE.left:\n        prev()\n        break\n      // UP_ARROW\n      case EVENT_CODE.up:\n        handleActions('zoomIn')\n        break\n      // RIGHT_ARROW\n      case EVENT_CODE.right:\n        next()\n        break\n      // DOWN_ARROW\n      case EVENT_CODE.down:\n        handleActions('zoomOut')\n        break\n    }\n  })\n  const mousewheelHandler = throttle(\n    (e: WheelEvent | any /* TODO: wheelDelta is deprecated */) => {\n      const delta = e.wheelDelta ? e.wheelDelta : -e.detail\n      if (delta > 0) {\n        handleActions('zoomIn', {\n          zoomRate: 1.2,\n          enableTransition: false,\n        })\n      } else {\n        handleActions('zoomOut', {\n          zoomRate: 1.2,\n          enableTransition: false,\n        })\n      }\n    }\n  )\n\n  scopeEventListener.run(() => {\n    useEventListener(document, 'keydown', keydownHandler)\n    useEventListener(document, mousewheelEventName, mousewheelHandler)\n  })\n}\n\nfunction unregisterEventListener() {\n  scopeEventListener.stop()\n}\n\nfunction handleImgLoad() {\n  loading.value = false\n}\n\nfunction handleImgError(e: Event) {\n  loading.value = false\n  ;(e.target as HTMLImageElement).alt = t('el.image.error')\n}\n\nfunction handleMouseDown(e: MouseEvent) {\n  if (loading.value || e.button !== 0 || !wrapper.value) return\n  transform.value.enableTransition = false\n\n  const { offsetX, offsetY } = transform.value\n  const startX = e.pageX\n  const startY = e.pageY\n\n  const dragHandler = throttle((ev: MouseEvent) => {\n    transform.value = {\n      ...transform.value,\n      offsetX: offsetX + ev.pageX - startX,\n      offsetY: offsetY + ev.pageY - startY,\n    }\n  })\n  const removeMousemove = useEventListener(document, 'mousemove', dragHandler)\n  useEventListener(document, 'mouseup', () => {\n    removeMousemove()\n  })\n\n  e.preventDefault()\n}\n\nfunction reset() {\n  transform.value = {\n    scale: 1,\n    deg: 0,\n    offsetX: 0,\n    offsetY: 0,\n    enableTransition: false,\n  }\n}\n\nfunction toggleMode() {\n  if (loading.value) return\n\n  const modeNames = keysOf(modes)\n  const modeValues = Object.values(modes)\n  const currentMode = mode.value.name\n  const index = modeValues.findIndex((i) => i.name === currentMode)\n  const nextIndex = (index + 1) % modeNames.length\n  mode.value = modes[modeNames[nextIndex]]\n  reset()\n}\n\nfunction prev() {\n  if (isFirst.value && !props.infinite) return\n  const len = props.urlList.length\n  index.value = (index.value - 1 + len) % len\n}\n\nfunction next() {\n  if (isLast.value && !props.infinite) return\n  const len = props.urlList.length\n  index.value = (index.value + 1) % len\n}\n\nfunction handleActions(action: ImageViewerAction, options = {}) {\n  if (loading.value) return\n  const { zoomRate, rotateDeg, enableTransition } = {\n    zoomRate: 1.4,\n    rotateDeg: 90,\n    enableTransition: true,\n    ...options,\n  }\n  switch (action) {\n    case 'zoomOut':\n      if (transform.value.scale > 0.2) {\n        transform.value.scale = Number.parseFloat(\n          (transform.value.scale / zoomRate).toFixed(3)\n        )\n      }\n      break\n    case 'zoomIn':\n      if (transform.value.scale < 7) {\n        transform.value.scale = Number.parseFloat(\n          (transform.value.scale * zoomRate).toFixed(3)\n        )\n      }\n      break\n    case 'clockwise':\n      transform.value.deg += rotateDeg\n      break\n    case 'anticlockwise':\n      transform.value.deg -= rotateDeg\n      break\n  }\n  transform.value.enableTransition = enableTransition\n}\n\nwatch(currentImg, () => {\n  nextTick(() => {\n    const $img = imgRefs.value[0]\n    if (!$img?.complete) {\n      loading.value = true\n    }\n  })\n})\n\nwatch(index, (val) => {\n  reset()\n  emit('switch', val)\n})\n\nonMounted(() => {\n  registerEventListener()\n  // add tabindex then wrapper can be focusable via Javascript\n  // focus wrapper so arrow key can't cause inner scroll behavior underneath\n  wrapper.value?.focus?.()\n})\n</script>\n","import { withInstall } from '@element-plus/utils'\n\nimport ImageViewer from './src/image-viewer.vue'\n\nexport const ElImageViewer = withInstall(ImageViewer)\nexport default ElImageViewer\n\nexport * from './src/image-viewer'\n","import {\n  buildProps,\n  definePropType,\n  isNumber,\n  mutable,\n} from '@element-plus/utils'\n\nimport type { ExtractPropTypes } from 'vue'\n\nexport const imageProps = buildProps({\n  hideOnClickModal: {\n    type: Boolean,\n    default: false,\n  },\n  src: {\n    type: String,\n    default: '',\n  },\n  fit: {\n    type: String,\n    values: ['', 'contain', 'cover', 'fill', 'none', 'scale-down'],\n    default: '',\n  },\n  loading: {\n    type: String,\n    values: ['eager', 'lazy'],\n  },\n  lazy: {\n    type: Boolean,\n    default: false,\n  },\n  scrollContainer: {\n    type: definePropType<string | HTMLElement | undefined>([String, Object]),\n  },\n  previewSrcList: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  previewTeleported: {\n    type: Boolean,\n    default: false,\n  },\n  zIndex: {\n    type: Number,\n  },\n  initialIndex: {\n    type: Number,\n    default: 0,\n  },\n  infinite: {\n    type: Boolean,\n    default: true,\n  },\n  closeOnPressEscape: {\n    type: Boolean,\n    default: true,\n  },\n} as const)\nexport type ImageProps = ExtractPropTypes<typeof imageProps>\n\nexport const imageEmits = {\n  error: (evt: Event) => evt instanceof Event,\n  switch: (val: number) => isNumber(val),\n  close: () => true,\n}\nexport type ImageEmits = typeof imageEmits\n","import { isClient } from '@vueuse/core'\n\nexport const isInContainer = (\n  el?: Element,\n  container?: Element | Window\n): boolean => {\n  if (!isClient || !el || !container) return false\n\n  const elRect = el.getBoundingClientRect()\n\n  let containerRect: Pick<DOMRect, 'top' | 'bottom' | 'left' | 'right'>\n  if (container instanceof Element) {\n    containerRect = container.getBoundingClientRect()\n  } else {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0,\n    }\n  }\n  return (\n    elRect.top < containerRect.bottom &&\n    elRect.bottom > containerRect.top &&\n    elRect.right > containerRect.left &&\n    elRect.left < containerRect.right\n  )\n}\n\nexport const getOffsetTop = (el: HTMLElement) => {\n  let offset = 0\n  let parent = el\n\n  while (parent) {\n    offset += parent.offsetTop\n    parent = parent.offsetParent as HTMLElement\n  }\n\n  return offset\n}\n\nexport const getOffsetTopDistance = (\n  el: HTMLElement,\n  containerEl: HTMLElement\n) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl))\n}\n\nexport const getClientXY = (event: MouseEvent | TouchEvent) => {\n  let clientX: number\n  let clientY: number\n  if (event.type === 'touchend') {\n    clientY = (event as TouchEvent).changedTouches[0].clientY\n    clientX = (event as TouchEvent).changedTouches[0].clientX\n  } else if (event.type.startsWith('touch')) {\n    clientY = (event as TouchEvent).touches[0].clientY\n    clientX = (event as TouchEvent).touches[0].clientX\n  } else {\n    clientY = (event as MouseEvent).clientY\n    clientX = (event as MouseEvent).clientX\n  }\n  return {\n    clientX,\n    clientY,\n  }\n}\n","<template>\n  <div ref=\"container\" :class=\"[ns.b(), $attrs.class]\" :style=\"containerStyle\">\n    <img\n      v-if=\"imageSrc !== undefined && !hasLoadError\"\n      v-bind=\"attrs\"\n      :src=\"imageSrc\"\n      :loading=\"loading\"\n      :style=\"imageStyle\"\n      :class=\"[ns.e('inner'), preview ? ns.e('preview') : '']\"\n      @click=\"clickHandler\"\n      @load=\"handleLoad\"\n      @error=\"handleError\"\n    />\n    <slot v-if=\"isLoading\" name=\"placeholder\">\n      <div :class=\"ns.e('placeholder')\" />\n    </slot>\n    <slot v-else-if=\"hasLoadError\" name=\"error\">\n      <div :class=\"ns.e('error')\">{{ t('el.image.error') }}</div>\n    </slot>\n    <template v-if=\"preview\">\n      <image-viewer\n        v-if=\"showViewer\"\n        :z-index=\"zIndex\"\n        :initial-index=\"imageIndex\"\n        :infinite=\"infinite\"\n        :url-list=\"previewSrcList\"\n        :hide-on-click-modal=\"hideOnClickModal\"\n        :teleported=\"previewTeleported\"\n        :close-on-press-escape=\"closeOnPressEscape\"\n        @close=\"closeViewer\"\n        @switch=\"switchViewer\"\n      >\n        <div v-if=\"$slots.viewer\">\n          <slot name=\"viewer\" />\n        </div>\n      </image-viewer>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  nextTick,\n  onMounted,\n  ref,\n  useAttrs as useRawAttrs,\n  watch,\n} from 'vue'\nimport { isClient, useEventListener, useThrottleFn } from '@vueuse/core'\nimport { useAttrs, useLocale, useNamespace } from '@element-plus/hooks'\nimport ImageViewer from '@element-plus/components/image-viewer'\nimport {\n  getScrollContainer,\n  isElement,\n  isInContainer,\n  isString,\n} from '@element-plus/utils'\nimport { imageEmits, imageProps } from './image'\n\nimport type { CSSProperties, StyleValue } from 'vue'\n\ndefineOptions({\n  name: 'ElImage',\n  inheritAttrs: false,\n})\n\nconst props = defineProps(imageProps)\nconst emit = defineEmits(imageEmits)\n\nlet prevOverflow = ''\n\nconst { t } = useLocale()\nconst ns = useNamespace('image')\nconst rawAttrs = useRawAttrs()\nconst attrs = useAttrs()\n\nconst imageSrc = ref<string | undefined>()\nconst hasLoadError = ref(false)\nconst isLoading = ref(true)\nconst showViewer = ref(false)\nconst container = ref<HTMLElement>()\nconst _scrollContainer = ref<HTMLElement | Window>()\n\nconst supportLoading = isClient && 'loading' in HTMLImageElement.prototype\nlet stopScrollListener: (() => void) | undefined\nlet stopWheelListener: (() => void) | undefined\n\nconst containerStyle = computed(() => rawAttrs.style as StyleValue)\n\nconst imageStyle = computed<CSSProperties>(() => {\n  const { fit } = props\n  if (isClient && fit) {\n    return { objectFit: fit }\n  }\n  return {}\n})\n\nconst preview = computed(() => {\n  const { previewSrcList } = props\n  return Array.isArray(previewSrcList) && previewSrcList.length > 0\n})\n\nconst imageIndex = computed(() => {\n  const { previewSrcList, initialIndex } = props\n  let previewIndex = initialIndex\n  if (initialIndex > previewSrcList.length - 1) {\n    previewIndex = 0\n  }\n  return previewIndex\n})\n\nconst isManual = computed(() => {\n  if (props.loading === 'eager') return false\n  return (!supportLoading && props.loading === 'lazy') || props.lazy\n})\n\nconst loadImage = () => {\n  if (!isClient) return\n\n  // reset status\n  isLoading.value = true\n  hasLoadError.value = false\n  imageSrc.value = props.src\n}\n\nfunction handleLoad() {\n  isLoading.value = false\n  hasLoadError.value = false\n}\n\nfunction handleError(event: Event) {\n  isLoading.value = false\n  hasLoadError.value = true\n  emit('error', event)\n}\n\nfunction handleLazyLoad() {\n  if (isInContainer(container.value, _scrollContainer.value)) {\n    loadImage()\n    removeLazyLoadListener()\n  }\n}\n\nconst lazyLoadHandler = useThrottleFn(handleLazyLoad, 200)\n\nasync function addLazyLoadListener() {\n  if (!isClient) return\n\n  await nextTick()\n\n  const { scrollContainer } = props\n  if (isElement(scrollContainer)) {\n    _scrollContainer.value = scrollContainer\n  } else if (isString(scrollContainer) && scrollContainer !== '') {\n    _scrollContainer.value =\n      document.querySelector<HTMLElement>(scrollContainer) ?? undefined\n  } else if (container.value) {\n    _scrollContainer.value = getScrollContainer(container.value)\n  }\n\n  if (_scrollContainer.value) {\n    stopScrollListener = useEventListener(\n      _scrollContainer,\n      'scroll',\n      lazyLoadHandler\n    )\n    setTimeout(() => handleLazyLoad(), 100)\n  }\n}\n\nfunction removeLazyLoadListener() {\n  if (!isClient || !_scrollContainer.value || !lazyLoadHandler) return\n\n  stopScrollListener?.()\n  _scrollContainer.value = undefined\n}\n\nfunction wheelHandler(e: WheelEvent) {\n  if (!e.ctrlKey) return\n\n  if (e.deltaY < 0) {\n    e.preventDefault()\n    return false\n  } else if (e.deltaY > 0) {\n    e.preventDefault()\n    return false\n  }\n}\n\nfunction clickHandler() {\n  // don't show viewer when preview is false\n  if (!preview.value) return\n\n  stopWheelListener = useEventListener('wheel', wheelHandler, {\n    passive: false,\n  })\n\n  // prevent body scroll\n  prevOverflow = document.body.style.overflow\n  document.body.style.overflow = 'hidden'\n  showViewer.value = true\n}\n\nfunction closeViewer() {\n  stopWheelListener?.()\n  document.body.style.overflow = prevOverflow\n  showViewer.value = false\n  emit('close')\n}\n\nfunction switchViewer(val: number) {\n  emit('switch', val)\n}\n\nwatch(\n  () => props.src,\n  () => {\n    if (isManual.value) {\n      // reset status\n      isLoading.value = true\n      hasLoadError.value = false\n      removeLazyLoadListener()\n      addLazyLoadListener()\n    } else {\n      loadImage()\n    }\n  }\n)\n\nonMounted(() => {\n  if (isManual.value) {\n    addLazyLoadListener()\n  } else {\n    loadImage()\n  }\n})\n</script>\n","import { withInstall } from '@element-plus/utils'\n\nimport Image from './src/image.vue'\n\nexport const ElImage = withInstall(Image)\nexport default ElImage\n\nexport * from './src/image'\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"goods\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_image = _resolveComponent(\"el-image\");\n\n  const _component_pageContent = _resolveComponent(\"pageContent\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_pageContent, {\n    contentTableConfig: _ctx.contentTableConfig,\n    pageName: \"goods\"\n  }, {\n    image: _withCtx(scope => [_createVNode(_component_el_image, {\n      style: {\n        \"width\": \"60px\",\n        \"height\": \"60px\"\n      },\n      src: scope.row.imgUrl,\n      \"preview-src-list\": [scope.row.imgUrl]\n    }, null, 8, [\"src\", \"preview-src-list\"])]),\n    oldPrice: _withCtx(scope => [_createTextVNode(_toDisplayString(\"￥\" + scope.row.oldPrice), 1)]),\n    _: 1\n  }, 8, [\"contentTableConfig\"])]);\n}","export const contentTableConfig = {\r\n  title: \"商品列表\",\r\n  propList: [\r\n    { prop: \"name\", label: \"商品名称\", minWidth: \"80\" },\r\n    {\r\n      prop: \"oldPrice\",\r\n      label: \"原价格\",\r\n      minWidth: \"80\",\r\n      slotName: \"oldPrice\",\r\n    },\r\n    { prop: \"newPrice\", label: \"现价格\", minWidth: \"80\" },\r\n    { prop: \"imgUrl\", label: \"商品图片\", minWidth: \"100\", slotName: \"image\" },\r\n    { prop: \"status\", label: \"状态\", minWidth: \"100\", slotName: \"status\" },\r\n    {\r\n      prop: \"createAt\",\r\n      label: \"创建时间\",\r\n      minWidth: \"150\",\r\n      slotName: \"createAt\",\r\n    },\r\n    {\r\n      prop: \"updateAt\",\r\n      label: \"更新时间\",\r\n      minWidth: \"150\",\r\n      slotName: \"updateAt\",\r\n    },\r\n    {\r\n      label: \"操作\",\r\n      minWidth: \"120\",\r\n      slotName: \"handler\",\r\n    },\r\n  ],\r\n  showIndexColumn: true,\r\n  showSelectColumn: true,\r\n};\r\n","import { defineComponent } from \"vue\";\nimport pageContent from \"@/components/page-content\";\nimport { contentTableConfig } from \"./config/content.config\";\nexport default defineComponent({\n  name: \"goodsIndex\",\n  components: {\n    pageContent\n  },\n\n  setup() {\n    return {\n      contentTableConfig\n    };\n  }\n\n});","/* unplugin-vue-components disabled */import { render } from \"./goods.vue?vue&type=template&id=13e26fc4&ts=true\"\nimport script from \"./goods.vue?vue&type=script&lang=ts\"\nexport * from \"./goods.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"E:\\\\Vue基础\\\\Vue3\\\\vue3-ts-xiangmu\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["FUNC_ERROR_TEXT","throttle","func","wait","options","leading","trailing","TypeError","isObject","debounce","imageViewerProps","buildProps","urlList","type","definePropType","Array","default","mutable","zIndex","Number","initialIndex","infinite","Boolean","hideOnClickModal","teleported","closeOnPressEscape","imageViewerEmits","close","switch","index","isFirefox","isClient","test","window","navigator","userAgent","modes","CONTAIN","name","icon","ORIGINAL","mousewheelEventName","t","ns","nextZIndex","wrapper","imgRefs","scopeEventListener","loading","props","mode","transform","scale","deg","offsetX","offsetY","enableTransition","isSingle","isFirst","isLast","currentImg","imgStyle","transition","style","computedZIndex","hide","unregisterEventListener","emit","registerEventListener","EVENT_CODE","toggleMode","prev","handleActions","next","zoomRate","useEventListener","handleImgLoad","handleImgError","e","handleMouseDown","removeMousemove","reset","action","rotateDeg","watch","nextTick","onMounted","ElImageViewer","withInstall","ImageViewer","imageProps","src","String","fit","values","lazy","scrollContainer","Object","previewSrcList","previewTeleported","imageEmits","error","evt","Event","val","isNumber","isInContainer","el","container","elRect","getBoundingClientRect","containerRect","Element","top","right","innerWidth","bottom","innerHeight","left","prevOverflow","rawAttrs","attrs","imageSrc","hasLoadError","isLoading","showViewer","_scrollContainer","supportLoading","stopScrollListener","stopWheelListener","containerStyle","imageStyle","objectFit","preview","imageIndex","previewIndex","isManual","loadImage","handleLoad","handleError","event","handleLazyLoad","removeLazyLoadListener","lazyLoadHandler","async","addLazyLoadListener","setTimeout","passive","document","ElImage","Image","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_image","_component_pageContent","contentTableConfig","pageName","image","scope","row","imgUrl","oldPrice","_","title","propList","prop","label","minWidth","slotName","showIndexColumn","showSelectColumn","components","pageContent","setup","__exports__"],"sourceRoot":""}